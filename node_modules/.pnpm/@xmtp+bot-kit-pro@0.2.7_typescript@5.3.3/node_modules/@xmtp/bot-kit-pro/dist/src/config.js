import { getEnvOrDefault } from "./utils.js";
const DEFAULT_XMTP_ENV = "dev";
const DEFAULT_MESSAGE_EXPIRY_MS = 1000 * 60 * 30; // 30 minutes
export function newBotConfig(name, cfg, handler) {
    if (!name) {
        throw new Error("Missing bot name");
    }
    return applyBotDefaults({
        ...cfg,
        name,
        handler,
    });
}
export function applyBotDefaults(config) {
    return {
        xmtpEnv: DEFAULT_XMTP_ENV,
        messageExpiryMs: DEFAULT_MESSAGE_EXPIRY_MS,
        skipMessageRefresh: false,
        ...config,
        clientOptions: {
            appVersion: `bot-kit-pro-${config.name}/0.0.0`,
            ...(config.clientOptions || {}),
        },
    };
}
export function newAppConfig(cfg) {
    return {
        db: {
            postgresConnectionString: getEnvOrDefault("POSTGRES_CONNECTION_STRING", cfg.db?.postgresConnectionString ||
                "postgres://postgres:xmtp@localhost:4321/postgres"),
        },
    };
}
//# sourceMappingURL=config.js.map